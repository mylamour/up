---
name: learn
description: Research and create improvement plans
user-invocable: true
allowed-tools: Read, Write, Bash, WebFetch, WebSearch, Glob, Grep
version: "1.0.0"
min-claude-version: "2024.01"
---

# Learning System

Research best practices from open source projects and blogs, then create actionable improvement plans.

## Workflow

```
RESEARCH â†’ ANALYZE â†’ COMPARE â†’ PLAN â†’ IMPLEMENT
```

## Commands

| Command | Description |
|---------|-------------|
| `/learn auto` | Auto-analyze project and generate insights |
| `/learn research [topic]` | Research a specific topic |
| `/learn analyze` | Analyze all research files |
| `/learn compare` | Compare findings with current code |
| `/learn plan` | Generate improvement PRD |
| `/learn full` | Run complete pipeline |

## Phase 1: RESEARCH

### Default Sources

Read `sources.json` for configured sources. Research from:

**Open Source Projects:**
- semgrep/semgrep - Pattern-based code analysis
- github/codeql - Query-based analysis
- High-quality projects in your tech stack

**Blogs & Documentation:**
- Official documentation for your frameworks
- Engineering blogs from top companies

### Actions

1. Use `WebSearch` to find recent articles/releases
2. Use `WebFetch` to read project READMEs and docs
3. Extract architecture patterns
4. Note innovative approaches

### Output

Save findings to `research/YYYY-MM-DD-topic.md`:

```markdown
# Research: [Topic Name]

**Created**: YYYY-MM-DD
**Status**: ðŸ“‹ Reference
**Source**: [Project/Blog Name]

---

## Key Findings

1. Finding 1
2. Finding 2

## Applicable Patterns

- Pattern A: Description
- Pattern B: Description

## Code Examples

```language
// example code
```
```

---

## Phase 2: ANALYZE

Read all research files and extract:

1. **Design Patterns** - Architectural approaches
2. **Key Innovations** - Novel techniques
3. **Best Practices** - Industry standards
4. **Reusable Components** - Code/concepts to adopt

### Output

Update `insights/patterns.md` with extracted patterns.

---

## Phase 3: COMPARE

Compare insights with current implementation:

1. Read project's main documentation (CLAUDE.md, README.md)
2. Scan source code for current patterns
3. Identify gaps and opportunities

### Output

Update `insights/gap-analysis.md` with findings.

---

## Phase 4: PLAN

Create improvement plan as PRD:

1. Prioritize gaps by impact/effort
2. Create user stories with acceptance criteria
3. Order by dependencies
4. Save as `prd.json`

### PRD Schema

```json
{
  "project": "Project Name",
  "branchName": "feature/improvements",
  "description": "Brief description",
  "userStories": [
    {
      "id": "US-001",
      "title": "Story title",
      "description": "Description",
      "acceptanceCriteria": ["Criterion 1", "Criterion 2"],
      "priority": 1,
      "effort": "low|medium|high",
      "passes": false
    }
  ]
}
```

---

## Phase 5: IMPLEMENT

Hand off to Product Loop:

```
/product-loop
```

The product loop will:
1. Read `prd.json` generated by learning system
2. Execute tasks with circuit breaker protection
3. Checkpoint before risky changes
4. Track progress

---

## AUTO Mode

When `/learn auto` is invoked:

1. Scan the codebase to detect technologies and patterns
2. Identify improvement areas automatically
3. Generate research topics based on findings
4. Research each topic (limit: 3 topics)
5. Continue with analyze â†’ compare â†’ plan

### Auto Mode Output

```
Project Profile:
- Languages: Python, TypeScript
- Frameworks: FastAPI, React
- Patterns: Repository Pattern, React Hooks
- Improvements: add-caching, optimize-queries
- Topics: FastAPI caching best practices, React performance
```

---

## State Files

| File | Purpose |
|------|---------|
| `sources.json` | Research sources config |
| `research/*.md` | Raw research notes |
| `insights/patterns.md` | Extracted patterns |
| `insights/gap-analysis.md` | Gap analysis |
| `prd.json` | Generated improvement plan |

---

## Context Budget

This skill is context-aware:
- Estimates token usage before reading files
- Warns when approaching budget limits
- Suggests summarization when needed

Check budget: Read `.claude/context_budget.json`
